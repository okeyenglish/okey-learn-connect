# Edge Functions (107 —à—Ç.)

> –í—Å–µ Supabase Edge Functions –ø—Ä–æ–µ–∫—Ç–∞

## –ö–∞—Ç–µ–≥–æ—Ä–∏–∏

### ü§ñ AI / GPT (12 —Ñ—É–Ω–∫—Ü–∏–π)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `ai-consultant` | AI –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç | OPENAI_API_KEY | ‚úì |
| `chat-with-ai` | –ß–∞—Ç —Å AI | OPENAI_API_KEY | ‚úì |
| `generate-app` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π | OPENAI_API_KEY | ‚úì |
| `generate-gpt-response` | GPT –æ—Ç–≤–µ—Ç—ã | OPENAI_API_KEY | ‚úì |
| `suggest-or-generate` | –ü–æ–¥—Å–∫–∞–∑–∫–∏/–≥–µ–Ω–µ—Ä–∞—Ü–∏—è | OPENAI_API_KEY | ‚úì |
| `teacher-assistant` | –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç —É—á–∏—Ç–µ–ª—è | LOVABLE_API_KEY | ‚úì |
| `transcribe-audio` | –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –∞—É–¥–∏–æ | OPENAI_API_KEY | ‚úì |
| `test-vertex-ai` | –¢–µ—Å—Ç Vertex AI | - | ‚úì |
| `set-ai-provider` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ | - | ‚úì |

### üì± Telegram (7 —Ñ—É–Ω–∫—Ü–∏–π)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `telegram-webhook` | Webhook Telegram | - | ‚úó |
| `telegram-send` | –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π | WAPPI_API_TOKEN | ‚úì |
| `telegram-channels` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏ | WAPPI_API_TOKEN | ‚úì |
| `telegram-get-avatar` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ | WAPPI_API_TOKEN | ‚úì |
| `telegram-get-contact-info` | –ò–Ω—Ñ–æ –æ –∫–æ–Ω—Ç–∞–∫—Ç–µ | WAPPI_API_TOKEN | ‚úì |

### üí¨ WhatsApp - Green API (4 —Ñ—É–Ω–∫—Ü–∏–∏)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `whatsapp-webhook` | Webhook Green API | - | ‚úó |
| `whatsapp-send` | –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π | GREEN_API_* | ‚úì |
| `whatsapp-channels` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏ | GREEN_API_* | ‚úì |
| `whatsapp-get-avatar` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ | GREEN_API_* | ‚úì |

### üí¨ WhatsApp - Wappi (5 —Ñ—É–Ω–∫—Ü–∏–π)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `wappi-whatsapp-webhook` | Webhook Wappi | - | ‚úó |
| `wappi-whatsapp-send` | –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π | - | ‚úì |
| `wappi-whatsapp-download` | –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–µ–¥–∏–∞ | - | ‚úì |
| `wappi-whatsapp-edit` | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π | - | ‚úì |
| `wappi-whatsapp-delete` | –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π | - | ‚úì |

### üí¨ WhatsApp - WPP Connect (4 —Ñ—É–Ω–∫—Ü–∏–∏)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `wpp-webhook` | Webhook WPP | - | ‚úó |
| `wpp-send` | –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π | WPP_HOST, WPP_SECRET | ‚úì |
| `wpp-channels` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏ | WPP_HOST, WPP_SECRET | ‚úì |
| `wpp-get-avatar` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ | WPP_HOST, WPP_SECRET | ‚úì |

### üì± MAX (Telegram –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞) (2 —Ñ—É–Ω–∫—Ü–∏–∏)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `max-webhook` | Webhook MAX | - | ‚úó |
| `max-send` | –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π | - | ‚úì |

### ü§ñ Salebot (4 —Ñ—É–Ω–∫—Ü–∏–∏)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `salebot-webhook` | Webhook Salebot | - | ‚úó |
| `salebot-import` | –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö | SALEBOT_API_KEY | ‚úì |
| `salebot-stop` | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ | - | ‚úó |
| `salebot-export-client` | –≠–∫—Å–ø–æ—Ä—Ç –∫–ª–∏–µ–Ω—Ç–∞ | SALEBOT_API_KEY | ‚úì |

### üí≥ T-Bank Payments (4 —Ñ—É–Ω–∫—Ü–∏–∏)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `tbank-webhook` | Webhook –ø–ª–∞—Ç–µ–∂–µ–π | - | ‚úó |
| `tbank-init` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞ | - | ‚úì |
| `tbank-init-client` | –ü–ª–∞—Ç—ë–∂ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ | - | ‚úì |
| `tbank-status` | –°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞ | - | ‚úì |

### üìû –¢–µ–ª–µ—Ñ–æ–Ω–∏—è (4 —Ñ—É–Ω–∫—Ü–∏–∏)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `onlinepbx-webhook` | Webhook OnlinePBX | - | ‚úó |
| `test-onlinepbx` | –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è | - | ‚úì |
| `request-callback` | –ó–∞–ø—Ä–æ—Å –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ | - | ‚úì |

### üîî Push Notifications (1 —Ñ—É–Ω–∫—Ü–∏—è)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `send-push-notification` | Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | VAPID_PUBLIC_KEY, VAPID_PRIVATE_KEY | ‚úì |

### üìä SEO (12 —Ñ—É–Ω–∫—Ü–∏–π)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `seo-analyze-page` | –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—ã | OPENAI_API_KEY | ‚úì |
| `seo-auto-cluster` | –ê–≤—Ç–æ-–∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è | - | ‚úì |
| `seo-check-tokens` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ | YANDEX_* | ‚úì |
| `seo-collect-wordstat` | –°–±–æ—Ä Wordstat | YANDEX_DIRECT_TOKEN | ‚úì |
| `seo-create-brief` | –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–∏—Ñ–∞ | OPENAI_API_KEY | ‚úì |
| `seo-enrich-clusters` | –û–±–æ–≥–∞—â–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ | YANDEX_DIRECT_TOKEN | ‚úì |
| `seo-generate-content` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ | OPENAI_API_KEY | ‚úì |
| `seo-import-gsc` | –ò–º–ø–æ—Ä—Ç GSC | GOOGLE_SERVICE_ACCOUNT | ‚úì |
| `seo-indexnow` | IndexNow | INDEXNOW_KEY | ‚úì |
| `seo-reoptimize-page` | –†–µ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | OPENAI_API_KEY | ‚úì |
| `seo-suggest-ideas` | –ò–¥–µ–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ | OPENAI_API_KEY | ‚úì |
| `seo-wordstat` | Wordstat API | YANDEX_DIRECT_TOKEN | ‚úì |
| `seo-yandex-export` | –≠–∫—Å–ø–æ—Ä—Ç Yandex | YANDEX_OAUTH_TOKEN | ‚úì |
| `seo-yandex-info` | –ò–Ω—Ñ–æ Yandex | YANDEX_OAUTH_TOKEN | ‚úì |

### üìß Email (2 —Ñ—É–Ω–∫—Ü–∏–∏)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `send-email` | –û—Ç–ø—Ä–∞–≤–∫–∞ email | RESEND_API_KEY | ‚úì |
| `send-payment-notifications` | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–ª–∞—Ç–µ–∂–∞—Ö | - | ‚úì |

### üóìÔ∏è –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ/–£—Ä–æ–∫–∏ (5 —Ñ—É–Ω–∫—Ü–∏–π)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `lesson-reminders` | –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–± —É—Ä–æ–∫–∞—Ö | - | ‚úó |
| `sync-auto-groups` | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ-–≥—Ä—É–ø–ø | - | ‚úì |
| `sync-single-auto-group` | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—Ä—É–ø–ø—ã | - | ‚úì |

### üåê –ü—É–±–ª–∏—á–Ω—ã–µ (3 —Ñ—É–Ω–∫—Ü–∏–∏)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `sitemap` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è sitemap | - | ‚úó |
| `webhook-proxy` | –ü—Ä–æ–∫—Å–∏ –≤–µ–±—Ö—É–∫–æ–≤ | - | ‚úó |

### üì± Apps (–ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π) (2 —Ñ—É–Ω–∫—Ü–∏–∏)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `publish-app` | –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | - | ‚úì |

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (1 —Ñ—É–Ω–∫—Ü–∏—è)

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–µ–∫—Ä–µ—Ç—ã | JWT |
|---------|-----------|---------|-----|
| `sla-monitor` | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ SLA | - | ‚úì |

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è JWT (supabase/config.toml)

```toml
# –ü—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (verify_jwt = false)
[functions.telegram-webhook]
verify_jwt = false

[functions.whatsapp-webhook]
verify_jwt = false

[functions.wappi-whatsapp-webhook]
verify_jwt = false

[functions.wpp-webhook]
verify_jwt = false

[functions.max-webhook]
verify_jwt = false

[functions.salebot-webhook]
verify_jwt = false

[functions.tbank-webhook]
verify_jwt = false

[functions.onlinepbx-webhook]
verify_jwt = false

[functions.sitemap]
verify_jwt = false

[functions.lesson-reminders]
verify_jwt = false

[functions.webhook-proxy]
verify_jwt = false

[functions.salebot-stop]
verify_jwt = false
```

## –î–µ–ø–ª–æ–π –∫–æ–º–∞–Ω–¥—ã

```bash
# –î–µ–ø–ª–æ–π –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
supabase functions deploy

# –î–µ–ø–ª–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
supabase functions deploy send-push-notification

# –î–µ–ø–ª–æ–π —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏
supabase secrets set OPENAI_API_KEY=sk-...
supabase secrets set VAPID_PUBLIC_KEY=...
supabase secrets set VAPID_PRIVATE_KEY=...
```
