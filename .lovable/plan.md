
# –°–∏—Å—Ç–µ–º–∞ —É—á—ë—Ç–∞ —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –º–æ—Ç–∏–≤–∞—Ü–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

## –û–±–∑–æ—Ä

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã real-time –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞ —Å–∏—Å—Ç–µ–º—É. –í–∫–ª—é—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã, –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```text
+-------------------------------------------+
|           FRONTEND (CRM/ChatOS)           |
+-------------------------------------------+
| StaffActivityIndicator    [NEW]           |
| - –°—Ç–∞—Ç—É—Å: –û–Ω–ª–∞–π–Ω/–ù–∞ –∑–≤–æ–Ω–∫–µ/–ù–µ–∞–∫—Ç–∏–≤–µ–Ω      |
| - –¢–∞–π–º–µ—Ä —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏                 |
| - –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è                      |
+-------------------------------------------+
           |                    |
           v                    v
+------------------+   +-------------------+
| useStaffActivity |   | useActivityTracker|
| (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ      |   | (—Ç—Ä–µ–∫–µ—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏|
| useStaffOnline   |   |  —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑.) |
| Presence)        |   +-------------------+
+------------------+
           |
           v
+-------------------------------------------+
|         Supabase Realtime Presence        |
| (—É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è - —Ä–∞—Å—à–∏—Ä—è–µ–º payload)    |
+-------------------------------------------+
           |
           v (–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å 5 –º–∏–Ω)
+-------------------------------------------+
|  staff_work_sessions (self-hosted DB)     |
|  - session_start, session_end             |
|  - active_time, idle_time, call_time      |
|  - activity_events (JSONB)                |
+-------------------------------------------+
           |
           v (—Ä–∞–∑ –≤ —á–∞—Å - cron)
+-------------------------------------------+
|  staff_daily_stats (–∞–≥—Ä–µ–≥–∞—Ü–∏—è)            |
|  - total_online, total_active, total_idle |
|  - total_calls, avg_response_time         |
+-------------------------------------------+
```

## –°—Ç–∞—Ç—É—Å—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

| –°—Ç–∞—Ç—É—Å | –£—Å–ª–æ–≤–∏–µ | –¶–≤–µ—Ç | –ò–∫–æ–Ω–∫–∞ |
|--------|---------|------|--------|
| –û–Ω–ª–∞–π–Ω | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å < 5 –º–∏–Ω | –ó–µ–ª–µ–Ω—ã–π | Circle (filled) |
| –ù–∞ –∑–≤–æ–Ω–∫–µ | –ê–∫—Ç–∏–≤–Ω—ã–π –∑–≤–æ–Ω–æ–∫ –≤ call_logs | –°–∏–Ω–∏–π –ø—É–ª—å—Å–∏—Ä—É—é—â–∏–π | Phone |
| –ù–µ–∞–∫—Ç–∏–≤–µ–Ω | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å 5+ –º–∏–Ω | –ñ–µ–ª—Ç—ã–π | Clock |
| –û—Ñ—Ñ–ª–∞–π–Ω | –ù–µ—Ç heartbeat 2+ –º–∏–Ω | –°–µ—Ä—ã–π | Circle (outline) |

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. StaffActivityIndicator (–≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å)
–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞:
- –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å —Ü–≤–µ—Ç–Ω—ã–º –±–µ–π–¥–∂–µ–º
- –¢–∞–π–º–µ—Ä —Ä–∞–±–æ—á–µ–π —Å–µ—Å—Å–∏–∏ (—Å –º–æ–º–µ–Ω—Ç–∞ –≤—Ö–æ–¥–∞)
- –ê–∫—Ç–∏–≤–Ω–æ–µ –≤—Ä–µ–º—è vs –ù–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –≤—Ä–µ–º—è
- –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å/–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–º–µ–Ω—É"

### 2. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ useStaffOnlinePresence
–î–æ–±–∞–≤–∏—Ç—å –≤ presence payload:
- `status`: 'online' | 'on_call' | 'idle' | 'offline'
- `sessionStart`: timestamp –Ω–∞—á–∞–ª–∞ —Å–µ—Å—Å–∏–∏
- `lastActivity`: timestamp –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏  
- `activeTime`: –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–µ –∞–∫—Ç–∏–≤–Ω–æ–µ –≤—Ä–µ–º—è
- `idleTime`: –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –≤—Ä–µ–º—è
- `currentCallId`: ID –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)

### 3. useActivityTracker (–Ω–æ–≤—ã–π —Ö—É–∫)
–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –°–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è: mousemove, keydown, click, scroll
- Throttled (—Ä–∞–∑ –≤ 30 —Å–µ–∫) –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ lastActivity
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ idle –ø–æ—Å–ª–µ 5 –º–∏–Ω
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å call_logs –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ on_call

### 4. Edge Function: save-work-session
–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç):
- Minimal payload: user_id, active_time_delta, idle_time_delta
- Batch insert –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ –∫–ª–∏–µ–Ω—Ç–∞ –ø—Ä–∏ unload –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏

### 5. Cron Job: aggregate-staff-stats  
–ï–∂–µ—á–∞—Å–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:
- –°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –¥–Ω—è–º/–Ω–µ–¥–µ–ª—è–º
- –†–∞—Å—á—ë—Ç KPI –º–µ—Ç—Ä–∏–∫
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è—Ö

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏:
1. **Realtime Presence** - —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ç–æ–ª—å–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º payload (0 –¥–æ–ø. –ø–æ–¥–ø–∏—Å–æ–∫)
2. **Activity tracking** - throttled –¥–æ 1 —Å–æ–±—ã—Ç–∏—è/30 —Å–µ–∫ (–Ω–µ debounce!)
3. **DB writes** - –±–∞—Ç—á–µ–≤–∞—è –∑–∞–ø–∏—Å—å –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç (–Ω–µ real-time)
4. **–ê–≥—Ä–µ–≥–∞—Ü–∏—è** - –æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è —á–µ—Ä–µ–∑ cron, –Ω–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
5. **LocalStorage** - –∫—ç—à —Å–µ—Å—Å–∏–∏ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ F5

### –†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:
- Presence payload: +~100 –±–∞–π—Ç –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- DB –∑–∞–ø–∏—Å—å: ~1 —Å—Ç—Ä–æ–∫–∞ / 5 –º–∏–Ω—É—Ç / –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = 12 —Å—Ç—Ä–æ–∫/—á–∞—Å
- Daily stats: 1 —Å—Ç—Ä–æ–∫–∞/–¥–µ–Ω—å/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

## –ü–ª–∞–Ω –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤

### –ú–µ—Ç—Ä–∏–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
1. **–í—Ä–µ–º—è –æ–Ω–ª–∞–π–Ω** - –º–∏–Ω–∏–º—É–º 7 —á–∞—Å–æ–≤/–¥–µ–Ω—å
2. **–ê–∫—Ç–∏–≤–Ω–æ–µ –≤—Ä–µ–º—è** - –º–∏–Ω–∏–º—É–º 80% –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ–Ω–ª–∞–π–Ω
3. **–í—Ä–µ–º—è –Ω–∞ –∑–≤–æ–Ω–∫–∞—Ö** - –º–∏–Ω–∏–º—É–º 2 —á–∞—Å–∞/–¥–µ–Ω—å (–¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤)
4. **–í—Ä–µ–º—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** - –º–∞–∫—Å–∏–º—É–º 30 –º–∏–Ω—É—Ç –ø–æ–¥—Ä—è–¥
5. **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞** - –º–∞–∫—Å–∏–º—É–º 5 –º–∏–Ω—É—Ç

### –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è:
1. **Real-time dashboard** –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
3. **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á—ë—Ç** –≤ Telegram/Email
4. **–ù–µ–¥–µ–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞** —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

### –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- –ë–µ–π–¥–∂–∏ –∑–∞ —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É
- –†–µ–π—Ç–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—ã
- –ë–æ–Ω—É—Å—ã –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ KPI

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```text
src/hooks/
  useActivityTracker.ts          [NEW] - –¢—Ä–µ–∫–µ—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  useStaffOnlinePresence.ts      [EDIT] - –†–∞—Å—à–∏—Ä–∏—Ç—å payload
  useWorkSession.ts              [NEW] - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–µ–π

src/components/crm/
  StaffActivityIndicator.tsx     [NEW] - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞
  StaffActivityDashboard.tsx     [NEW] - Dashboard –¥–ª—è –∞–¥–º–∏–Ω–∞

src/components/admin/
  StaffEfficiencyPanel.tsx       [NEW] - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

supabase/functions/
  save-work-session/index.ts     [NEW] - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
  aggregate-staff-stats/index.ts [NEW] - –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```

## SQL –º–∏–≥—Ä–∞—Ü–∏—è (self-hosted)

```sql
-- –¢–∞–±–ª–∏—Ü–∞ —Ä–∞–±–æ—á–∏—Ö —Å–µ—Å—Å–∏–π
CREATE TABLE IF NOT EXISTS staff_work_sessions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL,
  organization_id UUID,
  session_date DATE NOT NULL DEFAULT CURRENT_DATE,
  session_start TIMESTAMPTZ,
  session_end TIMESTAMPTZ,
  total_online_seconds INT DEFAULT 0,
  active_seconds INT DEFAULT 0,
  idle_seconds INT DEFAULT 0,
  on_call_seconds INT DEFAULT 0,
  idle_events INT DEFAULT 0,
  max_idle_streak_seconds INT DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now(),
  UNIQUE(user_id, session_date)
);

-- –î–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∞–≥—Ä–µ–≥–∞—Ü–∏—è)
CREATE TABLE IF NOT EXISTS staff_daily_stats (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL,
  organization_id UUID,
  stat_date DATE NOT NULL,
  total_online_minutes INT DEFAULT 0,
  active_minutes INT DEFAULT 0,
  idle_minutes INT DEFAULT 0,
  call_minutes INT DEFAULT 0,
  calls_count INT DEFAULT 0,
  messages_sent INT DEFAULT 0,
  avg_response_time_seconds INT,
  efficiency_score NUMERIC(5,2),
  created_at TIMESTAMPTZ DEFAULT now(),
  UNIQUE(user_id, stat_date)
);

CREATE INDEX idx_work_sessions_user_date ON staff_work_sessions(user_id, session_date);
CREATE INDEX idx_daily_stats_user_date ON staff_daily_stats(user_id, stat_date);
```

## UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Å—Ç–∞—Ç—É—Å–∞

```text
+--------------------------------------------------+
| [‚óè] –û–Ω–ª–∞–π–Ω  |  ‚è± 2—á 34–º  |  üìä –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: 87%  |
+--------------------------------------------------+

–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞:
- [‚óè] - —Ü–≤–µ—Ç–Ω–æ–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ (–∑–µ–ª–µ–Ω—ã–π/–∂–µ–ª—Ç—ã–π/—Å–∏–Ω–∏–π)
- ‚è± - –≤—Ä–µ–º—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
- üìä - –ø—Ä–æ—Ü–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

–ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ tooltip:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –°–µ—Å—Å–∏—è: 2—á 34–º                  ‚îÇ
‚îÇ ‚îú‚îÄ –ê–∫—Ç–∏–≤–Ω–æ: 2—á 12–º (87%)        ‚îÇ
‚îÇ ‚îú‚îÄ –ù–µ–∞–∫—Ç–∏–≤–Ω–æ: 18–º               ‚îÇ
‚îÇ ‚îî‚îÄ –ù–∞ –∑–≤–æ–Ω–∫–∞—Ö: 45–º              ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: —Ç–æ–ª—å–∫–æ —á—Ç–æ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Dashboard –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è

```text
+------------------------------------------+
|        –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã —Å–µ–≥–æ–¥–Ω—è        |
+------------------------------------------+
| –°–æ—Ç—Ä—É–¥–Ω–∏–∫     | –°—Ç–∞—Ç—É—Å   | –û–Ω–ª–∞–π–Ω | –ê–∫—Ç% |
|---------------|----------|--------|------|
| –ò–≤–∞–Ω –ü.       | [‚óè] –û–Ω–ª–∞–π–Ω| 3—á 20–º | 92%  |
| –ú–∞—Ä–∏—è –°.      | [üìû] –ó–≤–æ–Ω–æ–∫| 2—á 45–º | 88%  |
| –ê–ª–µ–∫—Å–µ–π –ö.    | [‚óê] –ù–µ–∞–∫—Ç.| 1—á 15–º | 65%  |
| –û–ª—å–≥–∞ –ú.      | [‚óã] –û—Ñ—Ñ–ª–∞–π–Ω| --     | --   |
+------------------------------------------+
| ‚ö† –ê–ª–µ–∫—Å–µ–π –ö. –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω —É–∂–µ 12 –º–∏–Ω—É—Ç      |
+------------------------------------------+
```

## –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–§–∞–∑–∞ 1: –ë–∞–∑–æ–≤—ã–π —Ç—Ä–µ–∫–∏–Ω–≥** (—ç—Ç–æ—Ç –ø–ª–∞–Ω)
   - useActivityTracker —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º idle
   - –†–∞—Å—à–∏—Ä–∏—Ç—å presence payload —Å—Ç–∞—Ç—É—Å–æ–º
   - StaffActivityIndicator –≤ header
   
2. **–§–∞–∑–∞ 2: –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**
   - SQL –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è —Ç–∞–±–ª–∏—Ü
   - Edge function save-work-session
   - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
   
3. **–§–∞–∑–∞ 3: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞**
   - Dashboard –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π
   - Cron –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ—Å—Ç–æ—è—Ö
   
4. **–§–∞–∑–∞ 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å KPI**
   - –°–≤—è–∑—å —Å manager_kpi_settings
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
   - –û—Ç—á—ë—Ç—ã –≤ Telegram

## –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ù–µ –≥—Ä—É–∑–∏—Ç—å —Å–∏—Å—Ç–µ–º—É**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Presence –∫–∞–Ω–∞–ª
2. **Privacy**: —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –≤–∏–¥–∏—Ç —Å–≤–æ–π —Å—Ç–∞—Ç—É—Å, —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å - –∫–æ–º–∞–Ω–¥—ã
3. **–ß–µ—Å—Ç–Ω–æ—Å—Ç—å**: —Ç–æ—á–Ω—ã–π —É—á—ë—Ç, –Ω–æ –±–µ–∑ –º–∏–∫—Ä–æ–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞
4. **–ú–æ—Ç–∏–≤–∞—Ü–∏—è, –Ω–µ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ**: —Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫–∞—Ö
