
# ะะปะฐะฝ: ะัะตะฒัั ัะฐะฑะพัะตะณะพ ะดะฝั ะธ ัะตะพัะณะฐะฝะธะทะฐัะธั ะผะตะฝั

## ะะฑะทะพั
ะะฐะผะตะฝะฐ ะบะฝะพะฟะบะธ "ะะฐัะฑะพัะด" ะฝะฐ ะบะพะผะฟะฐะบัะฝัะน ะฒะธะดะถะตั ะฟัะตะฒัั ัะฐะฑะพัะตะณะพ ะดะฝั ั ะผะตััะธะบะฐะผะธ (ะฐะบัะธะฒะฝะพะต ะฒัะตะผั, ะทะฒะพะฝะบะธ, ะฐะบัะธะฒะฝะพััั), ะฐ ัะฐะบะถะต ัะตะพัะณะฐะฝะธะทะฐัะธั "ะกะบัะธะฟัั" ะฒ ะฒัะฟะฐะดะฐััะตะต ะผะตะฝั "ะะฐะทะฐ ะะฝะฐะฝะธะน".

## ะะทะผะตะฝะตะฝะธั ะฒ ะธะฝัะตััะตะนัะต

### 1. ะัะตะฒัั ัะฐะฑะพัะตะณะพ ะดะฝั (ะฒะผะตััะพ ะบะฝะพะฟะบะธ "ะะฐัะฑะพัะด")
ะัะพะฑัะฐะถะฐะตั ะฒ ะบะพะผะฟะฐะบัะฝะพะน ัะพัะผะต:
- **ะัะตะผั ะฐะบัะธะฒะฝะพะน ัะฐะฑะพัั** - ะธะท `useActivityTracker`
- **ะะพะปะธัะตััะฒะพ ะทะฒะพะฝะบะพะฒ ะทะฐ ะดะตะฝั** - ะฝะพะฒัะน ะทะฐะฟัะพั ัะตัะตะท `selfHostedPost`
- **ะัะพัะตะฝั ะฐะบัะธะฒะฝะพััะธ** - ะธะท `useActivityTracker`

ะัะธ ะบะปะธะบะต ะพัะบััะฒะฐะตััั ะฟะพะปะฝัะน ะะฐัะฑะพัะด (ัััะตััะฒัััะธะน `DashboardModal`).

### 2. "ะะฐะทะฐ ะะฝะฐะฝะธะน" โ Dropdown Menu
ะะตัะตะธะผะตะฝะพะฒะฐะฝะธะต "ะกะบัะธะฟัั" ะฒ "ะะฐะทะฐ ะะฝะฐะฝะธะน" ั ะฒัะฟะฐะดะฐััะธะผ ะผะตะฝั:
- ๐ **ะกะบัะธะฟัั** (ัััะตััะฒัััะธะน `ScriptsModal`)
- ๐ FAQ (ะฑัะดััะตะต ัะฐััะธัะตะฝะธะต)
- ๐ ะะฑััะตะฝะธะต (ะฑัะดััะตะต ัะฐััะธัะตะฝะธะต)

---

## ะขะตัะฝะธัะตัะบะฐั ัะตะฐะปะธะทะฐัะธั

### ะะพะฒัะต ัะฐะนะปั

#### `src/components/crm/WorkdayPreviewWidget.tsx`
ะะพะผะฟะฐะบัะฝัะน ะฒะธะดะถะตั ะดะปั header ั ะผะตััะธะบะฐะผะธ ัะฐะฑะพัะตะณะพ ะดะฝั:
```text
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ข 2ั 45ะผ  โ  ๐ 12  โ  โก 87%  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```
- ะัะฟะพะปัะทัะตั `useActivityTracker` ะดะปั ะฒัะตะผะตะฝะธ ะธ ะฐะบัะธะฒะฝะพััะธ
- ะัะฟะพะปัะทัะตั ะฝะพะฒัะน ััะบ `useTodayCallsCount` ะดะปั ะทะฒะพะฝะบะพะฒ
- Tooltip ั ะดะตัะฐะปัะฝะพะน ะธะฝัะพัะผะฐัะธะตะน
- onClick ะพัะบััะฒะฐะตั DashboardModal

#### `src/hooks/useTodayCallsCount.ts`
ะฅัะบ ะดะปั ะฟะพะปััะตะฝะธั ะบะพะปะธัะตััะฒะฐ ะทะฒะพะฝะบะพะฒ ะทะฐ ัะตะบััะธะน ะดะตะฝั:
```typescript
// ะัะทัะฒะฐะตั selfHostedPost('get-call-logs') ั ัะธะปัััะพะผ ะฟะพ ะดะฐัะต
// ะะตัะธััะตั ัะตะทัะปััะฐั, ะพะฑะฝะพะฒะปัะตั ะบะฐะถะดัะต 5 ะผะธะฝัั
```

#### `src/components/crm/KnowledgeBaseDropdown.tsx`
ะัะฟะฐะดะฐััะตะต ะผะตะฝั "ะะฐะทะฐ ะะฝะฐะฝะธะน":
- ะัะฟะพะปัะทัะตั `DropdownMenu` ะธะท Radix UI
- ะัะฝะบัั: ะกะบัะธะฟัั, FAQ (ัะบะพัะพ), ะะฑััะตะฝะธะต (ัะบะพัะพ)
- ะะบะพะฝะบะฐ `BookOpen` ะฒะผะตััะพ `MessageCircle`

---

### ะะทะผะตะฝะตะฝะธั ะฒ ัััะตััะฒัััะธั ัะฐะนะปะฐั

#### `src/pages/CRM.tsx` (ัััะพะบะธ 2100-2120)
**ะะพ:**
```tsx
<Button onClick={() => setShowDashboardModal(true)}>
  <BarChart3 /> ะะฐัะฑะพัะด
</Button>
<Button onClick={() => setShowScriptsModal(true)}>
  <MessageCircle /> ะกะบัะธะฟัั
</Button>
```

**ะะพัะปะต:**
```tsx
<WorkdayPreviewWidget onClick={() => setShowDashboardModal(true)} />
<KnowledgeBaseDropdown onOpenScripts={() => setShowScriptsModal(true)} />
```

---

## ะะตัะฐะปะธ ะธะฝัะตะณัะฐัะธะธ

### ะะฐะฝะฝัะต ะดะปั ะฟัะตะฒัั
| ะะตััะธะบะฐ | ะััะพัะฝะธะบ | ะะฑะฝะพะฒะปะตะฝะธะต |
|---------|----------|------------|
| ะะบัะธะฒะฝะพะต ะฒัะตะผั | `useActivityTracker.activeTime` | Realtime |
| ะะฒะพะฝะบะธ ะทะฐ ะดะตะฝั | `useTodayCallsCount` | ะะฐะถะดัะต 5 ะผะธะฝ |
| % ะะบัะธะฒะฝะพััะธ | `useActivityTracker.activityPercentage` | Realtime |

### ะกัะธะปะธะทะฐัะธั
- ะะพะผะฟะฐะบัะฝัะน ัะฐะทะผะตั (ะฝะต ะฑะพะปััะต ัะตะบััะธั 2 ะบะฝะพะฟะพะบ)
- ะฆะฒะตัะพะฒะฐั ะธะฝะดะธะบะฐัะธั: ๐ข >80%, ๐ก 60-80%, ๐ด <60%
- Hover ัััะตะบั ั cursor: pointer
- Tooltip ั ะดะตัะฐะปัะฝะพะน ััะฐัะธััะธะบะพะน

---

## ะะพััะดะพะบ ัะตะฐะปะธะทะฐัะธะธ
1. ะกะพะทะดะฐัั `useTodayCallsCount` ััะบ
2. ะกะพะทะดะฐัั `WorkdayPreviewWidget` ะบะพะผะฟะพะฝะตะฝั
3. ะกะพะทะดะฐัั `KnowledgeBaseDropdown` ะบะพะผะฟะพะฝะตะฝั
4. ะะฑะฝะพะฒะธัั header ะฒ `CRM.tsx`
5. ะขะตััะธัะพะฒะฐะฝะธะต ะธะฝัะตะณัะฐัะธะธ
