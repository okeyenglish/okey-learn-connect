# CRM Refactoring

## Структура

Монолитный файл `CRM.tsx` (3,593 строк) был частично реорганизован для улучшения поддерживаемости.

### Hooks

Все состояния были вынесены в кастомные хуки в `src/pages/crm/hooks/`:

#### useCRMModals
Управляет состояниями всех модальных окон:
- Задачи, счета, группы, уроки
- Обучающие подменю
- Модалы добавления клиентов/учителей/студентов
- Скрипты, дашборд, расписание

#### useCRMState
Основные состояния CRM:
- Активные вкладки и чаты
- Выбранные клиенты и учителя
- Состояния сайдбаров
- Голосовой ассистент
- Админ-панель

#### useCRMTasks
Управление задачами:
- Drag & drop состояния
- Видимость задач
- Вкладки активных/просроченных
- Календарь/список

#### useCRMSearch
Поиск и фильтрация:
- Поисковые запросы
- Фильтры по филиалам и типам
- Массовые действия
- Режим выбора

## Преимущества

1. **Читаемость**: Сгруппированные состояния по функциональности
2. **Переиспользование**: Хуки можно использовать в других компонентах
3. **Тестирование**: Легче тестировать изолированную логику
4. **Производительность**: Потенциал для оптимизации перерисовок

## Дальнейшие улучшения

- [ ] Вынести секции UI в отдельные компоненты
- [ ] Создать utils для обработчиков событий
- [ ] Разделить большой CRM.tsx на более мелкие файлы
- [ ] Добавить типизацию для всех хуков
- [ ] Оптимизировать рендеринг с useMemo/useCallback
